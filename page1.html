<!DOCTYPE html>
<html>
	<head>
	<meta charset="UTF-8">
        <script src="https://netpie.io/public/netpieio/microgear.js"></script>
	</head>
<body>

<p>Test simple code for Smart Switch</p>




<script>
const APPKEY = "WHb9PGbAjWnL7hs";
	const APPSECRET = "qaiUhItyBR06oV5IflyAJ1kp8";
	const APPID = "TeezSmartHome";
	var microgear = Microgear.create({
		gearkey: APPKEY,
		gearsecret: APPSECRET
	});
	function switchPress(){
		if(document.getElementById("turn-on")){
			microgear.chat("pieplug","ON");
		}else if(document.getElementById("turn-off")){
			microgear.chat("pieplug","OFF");
		}
	}
	microgear.on('message', function(topic,data) {
		if(data=="OFF"){
			document.getElementById("turn-on");
		}else if(data=="ON"){
			document.getElementById("turn-off");
		}
	});
	microgear.on('connected', function() {
		microgear.setname('controllerplug');
		document.getElementById("turn-on");
		document.getElementById("turn-off");
	});
	microgear.resettoken(function(err){
		microgear.connect(APPID);
	});
        
        
        
        
</script>




<button  id="turn-on" onclick="switchPress()">Switch On</button>
<button  id="turn-off" onclick="switchPress()">Switch Off</button>



</body>
</html>
